{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\gpsha\\\\Downloads\\\\vaccine-dapp-main\\\\vaccine-dapp-main\\\\client\\\\src\\\\Screens\\\\Manufacturer\\\\index.jsx\",\n  _s = $RefreshSig$();\nimport { useState, useEffect } from 'react';\nimport useEth from \"../../contexts/EthContext/useEth\";\nimport { ButtonComp, RootContainer, SelectComp, TextInpComp, Spinner } from '../../components/Shared';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Manufacturer = () => {\n  _s();\n  const {\n    state: {\n      accounts,\n      contract,\n      vaccines\n    }\n  } = useEth();\n  const [selectedVaccine, setSelectedVaccine] = useState(0);\n  const [notReadyVacc, setNotReadyVacc] = useState([]);\n  const [distributor, setDistributor] = useState('');\n  const [loader, showloader] = useState(false);\n  useEffect(() => {\n    var _notReady$;\n    const _notReady = vaccines === null || vaccines === void 0 ? void 0 : vaccines.filter(vacc => vacc.state == \"0\");\n    setNotReadyVacc(_notReady);\n    setSelectedVaccine(parseInt((_notReady$ = _notReady[0]) === null || _notReady$ === void 0 ? void 0 : _notReady$.id));\n  }, [vaccines]);\n  const handleSelect = val => {\n    setSelectedVaccine(val);\n  };\n  const handleDistributor = distr => {\n    setDistributor(distr);\n  };\n  const createContainer = async e => {\n    try {\n      var _contract$methods, _contract$methods$Cre;\n      showloader(true);\n      const create = await (contract === null || contract === void 0 ? void 0 : (_contract$methods = contract.methods) === null || _contract$methods === void 0 ? void 0 : (_contract$methods$Cre = _contract$methods.CreateContainer(selectedVaccine)) === null || _contract$methods$Cre === void 0 ? void 0 : _contract$methods$Cre.send({\n        from: accounts[0]\n      }));\n      if (create) {\n        const _notReady = vaccines === null || vaccines === void 0 ? void 0 : vaccines.filter(vacc => {\n          console.log(vacc, \"vacc\");\n          return vacc.state == \"0\" && vacc.id != selectedVaccine;\n        });\n        setNotReadyVacc(_notReady);\n        if (_notReady.length) setSelectedVaccine(parseInt(_notReady[0].id));\n      }\n    } catch (err) {\n      console.log(err);\n    } finally {\n      showloader(false);\n    }\n  };\n  const registerDistributor = async () => {\n    try {\n      var _contract$methods2, _contract$methods2$di;\n      showloader(true);\n      const register = await (contract === null || contract === void 0 ? void 0 : (_contract$methods2 = contract.methods) === null || _contract$methods2 === void 0 ? void 0 : (_contract$methods2$di = _contract$methods2.distributorRegistration(distributor)) === null || _contract$methods2$di === void 0 ? void 0 : _contract$methods2$di.send({\n        from: accounts[0]\n      }));\n      console.log(register);\n    } catch (err) {\n      console.log(err);\n    } finally {\n      showloader(false);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(RootContainer, {\n    heading: \"Manufacturer\",\n    selectedVaccine: selectedVaccine,\n    address: accounts && accounts[0],\n    children: [/*#__PURE__*/_jsxDEV(SelectComp, {\n      vaccines: notReadyVacc,\n      selectedVaccine: selectedVaccine,\n      handleSelect: handleSelect\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 15\n    }, this), /*#__PURE__*/_jsxDEV(ButtonComp, {\n      disabled: loader,\n      loader: loader,\n      text: 'Create Container',\n      onClick: createContainer\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 15\n    }, this), /*#__PURE__*/_jsxDEV(TextInpComp, {\n      placeholder: 'Enter Distributor Address',\n      distributor: distributor,\n      handleDistributor: handleDistributor\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 15\n    }, this), /*#__PURE__*/_jsxDEV(ButtonComp, {\n      disabled: loader,\n      loader: loader,\n      text: 'Register Distributor',\n      onClick: registerDistributor\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 15\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 60,\n    columnNumber: 12\n  }, this);\n};\n_s(Manufacturer, \"j2mfHmY4Gt3y/DQ653iQ7Ytbx7o=\", false, function () {\n  return [useEth];\n});\n_c = Manufacturer;\nexport default Manufacturer;\nvar _c;\n$RefreshReg$(_c, \"Manufacturer\");","map":{"version":3,"names":["useState","useEffect","useEth","ButtonComp","RootContainer","SelectComp","TextInpComp","Spinner","jsxDEV","_jsxDEV","Manufacturer","_s","state","accounts","contract","vaccines","selectedVaccine","setSelectedVaccine","notReadyVacc","setNotReadyVacc","distributor","setDistributor","loader","showloader","_notReady$","_notReady","filter","vacc","parseInt","id","handleSelect","val","handleDistributor","distr","createContainer","e","_contract$methods","_contract$methods$Cre","create","methods","CreateContainer","send","from","console","log","length","err","registerDistributor","_contract$methods2","_contract$methods2$di","register","distributorRegistration","heading","address","children","fileName","_jsxFileName","lineNumber","columnNumber","disabled","text","onClick","placeholder","_c","$RefreshReg$"],"sources":["C:/Users/gpsha/Downloads/vaccine-dapp-main/vaccine-dapp-main/client/src/Screens/Manufacturer/index.jsx"],"sourcesContent":["import { useState,useEffect } from 'react';\nimport useEth from \"../../contexts/EthContext/useEth\";\nimport {ButtonComp,RootContainer,SelectComp,TextInpComp,Spinner} from '../../components/Shared';\n\nconst Manufacturer=()=>{\n    const { state: { accounts,contract,vaccines} } = useEth();  \n    const [selectedVaccine,setSelectedVaccine]=useState(0);\n    const [notReadyVacc,setNotReadyVacc]=useState([]);\n    const [distributor,setDistributor]=useState('');\n    const [loader,showloader]=useState(false);\n    useEffect(()=>{\n      const _notReady=vaccines?.filter(vacc=>(vacc.state==\"0\"));\n      setNotReadyVacc(_notReady);\n      setSelectedVaccine(parseInt(_notReady[0]?.id))\n    },[vaccines])\n\n    const handleSelect=(val)=>{\n        setSelectedVaccine(val)\n    }\n    const handleDistributor=(distr)=>{\n         setDistributor(distr)\n    }\n    const createContainer=async(e)=>{\n      try{\n        showloader(true)\n        const create=await contract?.methods?.CreateContainer(selectedVaccine)?.send({from:accounts[0]});\n        if(create){\n          const _notReady=vaccines?.filter(vacc=>{\n              console.log(vacc,\"vacc\")\n            return vacc.state==\"0\" && vacc.id!=selectedVaccine\n          });\n          setNotReadyVacc(_notReady);\n          if(_notReady.length)\n          setSelectedVaccine(parseInt(_notReady[0].id))\n\n        }\n      }\n      catch(err){\n        console.log(err)\n      }\n      finally{\n        showloader(false)\n      }\n      \n    }\n    const registerDistributor=async()=>{\n      try{\n        showloader(true)\n        const register=await contract?.methods?.distributorRegistration(distributor)?.send({from:accounts[0]})\n       console.log(register)\n      }\n      catch(err){\n        console.log(err)\n      }\n      finally{\n        showloader(false)\n      }\n    }\n    \n    return <RootContainer heading={\"Manufacturer\"} selectedVaccine={selectedVaccine} address={accounts && accounts[0]}>\n              <SelectComp vaccines={notReadyVacc} selectedVaccine={selectedVaccine} handleSelect={handleSelect} />\n              <ButtonComp disabled={loader} loader={loader} text={'Create Container'} onClick={createContainer} />\n              <TextInpComp placeholder={'Enter Distributor Address'} distributor={distributor} handleDistributor={handleDistributor}/>\n              <ButtonComp disabled={loader} loader={loader} text={'Register Distributor'} onClick={registerDistributor}/>\n          </RootContainer>\n}\n\nexport default Manufacturer;"],"mappings":";;AAAA,SAASA,QAAQ,EAACC,SAAS,QAAQ,OAAO;AAC1C,OAAOC,MAAM,MAAM,kCAAkC;AACrD,SAAQC,UAAU,EAACC,aAAa,EAACC,UAAU,EAACC,WAAW,EAACC,OAAO,QAAO,yBAAyB;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAEhG,MAAMC,YAAY,GAACA,CAAA,KAAI;EAAAC,EAAA;EACnB,MAAM;IAAEC,KAAK,EAAE;MAAEC,QAAQ;MAACC,QAAQ;MAACC;IAAQ;EAAE,CAAC,GAAGb,MAAM,CAAC,CAAC;EACzD,MAAM,CAACc,eAAe,EAACC,kBAAkB,CAAC,GAACjB,QAAQ,CAAC,CAAC,CAAC;EACtD,MAAM,CAACkB,YAAY,EAACC,eAAe,CAAC,GAACnB,QAAQ,CAAC,EAAE,CAAC;EACjD,MAAM,CAACoB,WAAW,EAACC,cAAc,CAAC,GAACrB,QAAQ,CAAC,EAAE,CAAC;EAC/C,MAAM,CAACsB,MAAM,EAACC,UAAU,CAAC,GAACvB,QAAQ,CAAC,KAAK,CAAC;EACzCC,SAAS,CAAC,MAAI;IAAA,IAAAuB,UAAA;IACZ,MAAMC,SAAS,GAACV,QAAQ,aAARA,QAAQ,uBAARA,QAAQ,CAAEW,MAAM,CAACC,IAAI,IAAGA,IAAI,CAACf,KAAK,IAAE,GAAI,CAAC;IACzDO,eAAe,CAACM,SAAS,CAAC;IAC1BR,kBAAkB,CAACW,QAAQ,EAAAJ,UAAA,GAACC,SAAS,CAAC,CAAC,CAAC,cAAAD,UAAA,uBAAZA,UAAA,CAAcK,EAAE,CAAC,CAAC;EAChD,CAAC,EAAC,CAACd,QAAQ,CAAC,CAAC;EAEb,MAAMe,YAAY,GAAEC,GAAG,IAAG;IACtBd,kBAAkB,CAACc,GAAG,CAAC;EAC3B,CAAC;EACD,MAAMC,iBAAiB,GAAEC,KAAK,IAAG;IAC5BZ,cAAc,CAACY,KAAK,CAAC;EAC1B,CAAC;EACD,MAAMC,eAAe,GAAC,MAAMC,CAAC,IAAG;IAC9B,IAAG;MAAA,IAAAC,iBAAA,EAAAC,qBAAA;MACDd,UAAU,CAAC,IAAI,CAAC;MAChB,MAAMe,MAAM,GAAC,OAAMxB,QAAQ,aAARA,QAAQ,wBAAAsB,iBAAA,GAARtB,QAAQ,CAAEyB,OAAO,cAAAH,iBAAA,wBAAAC,qBAAA,GAAjBD,iBAAA,CAAmBI,eAAe,CAACxB,eAAe,CAAC,cAAAqB,qBAAA,uBAAnDA,qBAAA,CAAqDI,IAAI,CAAC;QAACC,IAAI,EAAC7B,QAAQ,CAAC,CAAC;MAAC,CAAC,CAAC;MAChG,IAAGyB,MAAM,EAAC;QACR,MAAMb,SAAS,GAACV,QAAQ,aAARA,QAAQ,uBAARA,QAAQ,CAAEW,MAAM,CAACC,IAAI,IAAE;UACnCgB,OAAO,CAACC,GAAG,CAACjB,IAAI,EAAC,MAAM,CAAC;UAC1B,OAAOA,IAAI,CAACf,KAAK,IAAE,GAAG,IAAIe,IAAI,CAACE,EAAE,IAAEb,eAAe;QACpD,CAAC,CAAC;QACFG,eAAe,CAACM,SAAS,CAAC;QAC1B,IAAGA,SAAS,CAACoB,MAAM,EACnB5B,kBAAkB,CAACW,QAAQ,CAACH,SAAS,CAAC,CAAC,CAAC,CAACI,EAAE,CAAC,CAAC;MAE/C;IACF,CAAC,CACD,OAAMiB,GAAG,EAAC;MACRH,OAAO,CAACC,GAAG,CAACE,GAAG,CAAC;IAClB,CAAC,SACM;MACLvB,UAAU,CAAC,KAAK,CAAC;IACnB;EAEF,CAAC;EACD,MAAMwB,mBAAmB,GAAC,MAAAA,CAAA,KAAS;IACjC,IAAG;MAAA,IAAAC,kBAAA,EAAAC,qBAAA;MACD1B,UAAU,CAAC,IAAI,CAAC;MAChB,MAAM2B,QAAQ,GAAC,OAAMpC,QAAQ,aAARA,QAAQ,wBAAAkC,kBAAA,GAARlC,QAAQ,CAAEyB,OAAO,cAAAS,kBAAA,wBAAAC,qBAAA,GAAjBD,kBAAA,CAAmBG,uBAAuB,CAAC/B,WAAW,CAAC,cAAA6B,qBAAA,uBAAvDA,qBAAA,CAAyDR,IAAI,CAAC;QAACC,IAAI,EAAC7B,QAAQ,CAAC,CAAC;MAAC,CAAC,CAAC;MACvG8B,OAAO,CAACC,GAAG,CAACM,QAAQ,CAAC;IACtB,CAAC,CACD,OAAMJ,GAAG,EAAC;MACRH,OAAO,CAACC,GAAG,CAACE,GAAG,CAAC;IAClB,CAAC,SACM;MACLvB,UAAU,CAAC,KAAK,CAAC;IACnB;EACF,CAAC;EAED,oBAAOd,OAAA,CAACL,aAAa;IAACgD,OAAO,EAAE,cAAe;IAACpC,eAAe,EAAEA,eAAgB;IAACqC,OAAO,EAAExC,QAAQ,IAAIA,QAAQ,CAAC,CAAC,CAAE;IAAAyC,QAAA,gBACxG7C,OAAA,CAACJ,UAAU;MAACU,QAAQ,EAAEG,YAAa;MAACF,eAAe,EAAEA,eAAgB;MAACc,YAAY,EAAEA;IAAa;MAAAyB,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE,CAAC,eACpGjD,OAAA,CAACN,UAAU;MAACwD,QAAQ,EAAErC,MAAO;MAACA,MAAM,EAAEA,MAAO;MAACsC,IAAI,EAAE,kBAAmB;MAACC,OAAO,EAAE3B;IAAgB;MAAAqB,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE,CAAC,eACpGjD,OAAA,CAACH,WAAW;MAACwD,WAAW,EAAE,2BAA4B;MAAC1C,WAAW,EAAEA,WAAY;MAACY,iBAAiB,EAAEA;IAAkB;MAAAuB,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAC,CAAC,eACxHjD,OAAA,CAACN,UAAU;MAACwD,QAAQ,EAAErC,MAAO;MAACA,MAAM,EAAEA,MAAO;MAACsC,IAAI,EAAE,sBAAuB;MAACC,OAAO,EAAEd;IAAoB;MAAAQ,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAC,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OAChG,CAAC;AAC1B,CAAC;AAAA/C,EAAA,CA7DKD,YAAY;EAAA,QACmCR,MAAM;AAAA;AAAA6D,EAAA,GADrDrD,YAAY;AA+DlB,eAAeA,YAAY;AAAC,IAAAqD,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module"}