{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\gpsha\\\\Downloads\\\\vaccine-dapp-main\\\\vaccine-dapp-main\\\\client\\\\src\\\\Screens\\\\Container\\\\index.jsx\",\n  _s = $RefreshSig$();\nimport { useState, useEffect } from 'react';\nimport useEth from \"../../contexts/EthContext/useEth\";\nimport { ButtonComp, RootContainer, SelectComp, TextInpComp } from '../../components/Shared';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Container = () => {\n  _s();\n  const {\n    state: {\n      accounts,\n      contract,\n      vaccines\n    }\n  } = useEth();\n  const [selectedVaccine, setSelectedVaccine] = useState(0);\n  const [startedVaccines, setStartedVaccines] = useState([]);\n  const [loader, showloader] = useState(false);\n  useEffect(() => {\n    var _selected$;\n    let _selected = vaccines === null || vaccines === void 0 ? void 0 : vaccines.filter(vacc => vacc.state == \"2\");\n    setStartedVaccines(_selected);\n    setSelectedVaccine(parseInt((_selected$ = _selected[0]) === null || _selected$ === void 0 ? void 0 : _selected$.id));\n  }, [vaccines]);\n  const handleSelect = val => {\n    setSelectedVaccine(val);\n  };\n  const handleViolation = async (type, val) => {\n    try {\n      var _contract$methods, _contract$methods$vio;\n      showloader(true);\n      const violated = await (contract === null || contract === void 0 ? void 0 : (_contract$methods = contract.methods) === null || _contract$methods === void 0 ? void 0 : (_contract$methods$vio = _contract$methods.violationOccurrence(selectedVaccine, type, val)) === null || _contract$methods$vio === void 0 ? void 0 : _contract$methods$vio.send({\n        from: accounts[0]\n      }));\n      if (violated) {\n        const _violate = vaccines === null || vaccines === void 0 ? void 0 : vaccines.filter(vacc => vacc.state == \"2\" && vacc.id != selectedVaccine);\n        setStartedVaccines(_violate);\n        if (_violate.length) setSelectedVaccine(parseInt(_violate[0].id));\n      }\n    } catch (err) {\n      console.log(err);\n    } finally {\n      showloader(false);\n    }\n  };\n  const BUTTONS = [{\n    text: 'Temperature Violated',\n    type: 1\n  }, {\n    text: 'Container Disclosed',\n    type: 2\n  }, {\n    text: 'Container Exposed',\n    type: 3\n  }, {\n    text: 'Container Route Changed',\n    type: 4\n  }];\n  return /*#__PURE__*/_jsxDEV(RootContainer, {\n    heading: \"Container\",\n    address: accounts && accounts[0],\n    children: [/*#__PURE__*/_jsxDEV(SelectComp, {\n      vaccines: startedVaccines,\n      selectedVaccine: selectedVaccine,\n      handleSelect: handleSelect\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 12\n    }, this), BUTTONS.map(btn => {\n      return /*#__PURE__*/_jsxDEV(ButtonComp, {\n        disabled: loader,\n        loader: loader,\n        text: btn.text,\n        onClick: () => handleViolation(btn.type, 12)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 19\n      }, this);\n    })]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 60,\n    columnNumber: 8\n  }, this);\n};\n_s(Container, \"fA1LaKBY3sYb2I6NYVkF7uHWnWc=\", false, function () {\n  return [useEth];\n});\n_c = Container;\nexport default Container;\nvar _c;\n$RefreshReg$(_c, \"Container\");","map":{"version":3,"names":["useState","useEffect","useEth","ButtonComp","RootContainer","SelectComp","TextInpComp","jsxDEV","_jsxDEV","Container","_s","state","accounts","contract","vaccines","selectedVaccine","setSelectedVaccine","startedVaccines","setStartedVaccines","loader","showloader","_selected$","_selected","filter","vacc","parseInt","id","handleSelect","val","handleViolation","type","_contract$methods","_contract$methods$vio","violated","methods","violationOccurrence","send","from","_violate","length","err","console","log","BUTTONS","text","heading","address","children","fileName","_jsxFileName","lineNumber","columnNumber","map","btn","disabled","onClick","_c","$RefreshReg$"],"sources":["C:/Users/gpsha/Downloads/vaccine-dapp-main/vaccine-dapp-main/client/src/Screens/Container/index.jsx"],"sourcesContent":["import { useState, useEffect } from 'react';\nimport useEth from \"../../contexts/EthContext/useEth\";\nimport {ButtonComp,RootContainer,SelectComp,TextInpComp} from '../../components/Shared';\n\nconst Container=()=>{\n    const { state: { accounts,contract,vaccines} } = useEth();\n    const [selectedVaccine,setSelectedVaccine]=useState(0);  \n    const [startedVaccines,setStartedVaccines]=useState([]);\n    const [loader,showloader]=useState(false);\n    \n    useEffect(()=>{\n     let _selected= vaccines?.filter(vacc=>(vacc.state==\"2\"));\n     setStartedVaccines(_selected);\n     setSelectedVaccine(parseInt(_selected[0]?.id))\n  \n    \n    },[vaccines])\n    const handleSelect=(val)=>{\n      setSelectedVaccine(val)\n  }\n  const handleViolation=async(type, val)=>{\n    try{\n      showloader(true)\n      const violated=await contract?.methods?.violationOccurrence(selectedVaccine,type,val)?.send({from:accounts[0]})\n      if(violated){\n        const _violate=vaccines?.filter(vacc=>(( vacc.state==\"2\") && vacc.id!=selectedVaccine));\n        setStartedVaccines(_violate);\n        if(_violate.length)\n        setSelectedVaccine(parseInt(_violate[0].id))\n        \n\n      }\n    }\n    catch(err){\n      console.log(err)\n    }\n    finally{\n      showloader(false)\n    }\n  }\n \n  const BUTTONS=[\n    {\n     text:'Temperature Violated',\n     type:1\n    },\n    {\n      text:'Container Disclosed',\n      type:2\n     },\n     {\n      text:'Container Exposed',\n      type:3\n     },\n     {\n      text:'Container Route Changed',\n      type:4\n     },\n    ]\nreturn <RootContainer heading={\"Container\"} address={accounts && accounts[0]}> \n           <SelectComp vaccines={startedVaccines} selectedVaccine={selectedVaccine} handleSelect={handleSelect} />\n           {BUTTONS.map(btn=>{\n           return <ButtonComp disabled={loader} loader={loader}  text={btn.text} onClick={()=>handleViolation(btn.type,12)}/>})}\n  </RootContainer>\n}\nexport default Container;"],"mappings":";;AAAA,SAASA,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAC3C,OAAOC,MAAM,MAAM,kCAAkC;AACrD,SAAQC,UAAU,EAACC,aAAa,EAACC,UAAU,EAACC,WAAW,QAAO,yBAAyB;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAExF,MAAMC,SAAS,GAACA,CAAA,KAAI;EAAAC,EAAA;EAChB,MAAM;IAAEC,KAAK,EAAE;MAAEC,QAAQ;MAACC,QAAQ;MAACC;IAAQ;EAAE,CAAC,GAAGZ,MAAM,CAAC,CAAC;EACzD,MAAM,CAACa,eAAe,EAACC,kBAAkB,CAAC,GAAChB,QAAQ,CAAC,CAAC,CAAC;EACtD,MAAM,CAACiB,eAAe,EAACC,kBAAkB,CAAC,GAAClB,QAAQ,CAAC,EAAE,CAAC;EACvD,MAAM,CAACmB,MAAM,EAACC,UAAU,CAAC,GAACpB,QAAQ,CAAC,KAAK,CAAC;EAEzCC,SAAS,CAAC,MAAI;IAAA,IAAAoB,UAAA;IACb,IAAIC,SAAS,GAAER,QAAQ,aAARA,QAAQ,uBAARA,QAAQ,CAAES,MAAM,CAACC,IAAI,IAAGA,IAAI,CAACb,KAAK,IAAE,GAAI,CAAC;IACxDO,kBAAkB,CAACI,SAAS,CAAC;IAC7BN,kBAAkB,CAACS,QAAQ,EAAAJ,UAAA,GAACC,SAAS,CAAC,CAAC,CAAC,cAAAD,UAAA,uBAAZA,UAAA,CAAcK,EAAE,CAAC,CAAC;EAG/C,CAAC,EAAC,CAACZ,QAAQ,CAAC,CAAC;EACb,MAAMa,YAAY,GAAEC,GAAG,IAAG;IACxBZ,kBAAkB,CAACY,GAAG,CAAC;EAC3B,CAAC;EACD,MAAMC,eAAe,GAAC,MAAAA,CAAMC,IAAI,EAAEF,GAAG,KAAG;IACtC,IAAG;MAAA,IAAAG,iBAAA,EAAAC,qBAAA;MACDZ,UAAU,CAAC,IAAI,CAAC;MAChB,MAAMa,QAAQ,GAAC,OAAMpB,QAAQ,aAARA,QAAQ,wBAAAkB,iBAAA,GAARlB,QAAQ,CAAEqB,OAAO,cAAAH,iBAAA,wBAAAC,qBAAA,GAAjBD,iBAAA,CAAmBI,mBAAmB,CAACpB,eAAe,EAACe,IAAI,EAACF,GAAG,CAAC,cAAAI,qBAAA,uBAAhEA,qBAAA,CAAkEI,IAAI,CAAC;QAACC,IAAI,EAACzB,QAAQ,CAAC,CAAC;MAAC,CAAC,CAAC;MAC/G,IAAGqB,QAAQ,EAAC;QACV,MAAMK,QAAQ,GAACxB,QAAQ,aAARA,QAAQ,uBAARA,QAAQ,CAAES,MAAM,CAACC,IAAI,IAAKA,IAAI,CAACb,KAAK,IAAE,GAAG,IAAKa,IAAI,CAACE,EAAE,IAAEX,eAAgB,CAAC;QACvFG,kBAAkB,CAACoB,QAAQ,CAAC;QAC5B,IAAGA,QAAQ,CAACC,MAAM,EAClBvB,kBAAkB,CAACS,QAAQ,CAACa,QAAQ,CAAC,CAAC,CAAC,CAACZ,EAAE,CAAC,CAAC;MAG9C;IACF,CAAC,CACD,OAAMc,GAAG,EAAC;MACRC,OAAO,CAACC,GAAG,CAACF,GAAG,CAAC;IAClB,CAAC,SACM;MACLpB,UAAU,CAAC,KAAK,CAAC;IACnB;EACF,CAAC;EAED,MAAMuB,OAAO,GAAC,CACZ;IACCC,IAAI,EAAC,sBAAsB;IAC3Bd,IAAI,EAAC;EACN,CAAC,EACD;IACEc,IAAI,EAAC,qBAAqB;IAC1Bd,IAAI,EAAC;EACN,CAAC,EACD;IACCc,IAAI,EAAC,mBAAmB;IACxBd,IAAI,EAAC;EACN,CAAC,EACD;IACCc,IAAI,EAAC,yBAAyB;IAC9Bd,IAAI,EAAC;EACN,CAAC,CACD;EACL,oBAAOtB,OAAA,CAACJ,aAAa;IAACyC,OAAO,EAAE,WAAY;IAACC,OAAO,EAAElC,QAAQ,IAAIA,QAAQ,CAAC,CAAC,CAAE;IAAAmC,QAAA,gBAClEvC,OAAA,CAACH,UAAU;MAACS,QAAQ,EAAEG,eAAgB;MAACF,eAAe,EAAEA,eAAgB;MAACY,YAAY,EAAEA;IAAa;MAAAqB,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE,CAAC,EACtGR,OAAO,CAACS,GAAG,CAACC,GAAG,IAAE;MAClB,oBAAO7C,OAAA,CAACL,UAAU;QAACmD,QAAQ,EAAEnC,MAAO;QAACA,MAAM,EAAEA,MAAO;QAAEyB,IAAI,EAAES,GAAG,CAACT,IAAK;QAACW,OAAO,EAAEA,CAAA,KAAI1B,eAAe,CAACwB,GAAG,CAACvB,IAAI,EAAC,EAAE;MAAE;QAAAkB,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAC,CAAC;IAAA,CAAC,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OAC9G,CAAC;AAClB,CAAC;AAAAzC,EAAA,CA5DKD,SAAS;EAAA,QACsCP,MAAM;AAAA;AAAAsD,EAAA,GADrD/C,SAAS;AA6Df,eAAeA,SAAS;AAAC,IAAA+C,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module"}